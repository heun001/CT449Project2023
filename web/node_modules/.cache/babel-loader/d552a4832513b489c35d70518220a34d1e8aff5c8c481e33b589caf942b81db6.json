{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      login: false,\n      user: null\n    };\n  },\n  methods: {\n    doLogout: async function () {\n      const response = await axios.post(this.$apiURL + \"/logout\", null, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        // remove access token from local storage\n        localStorage.removeItem(this.$accessTokenKey);\n        window.location.href = \"/login\";\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    getUser: async function () {\n      const self = this;\n\n      // check if user is logged in\n      if (localStorage.getItem(this.$accessTokenKey)) {\n        const response = await axios.post(this.$apiURL + \"/getUser\", null, {\n          headers: this.$headers\n        });\n        if (response.data.status == \"success\") {\n          // user is logged in\n          this.$user = response.data.user;\n          console.log(this.$user);\n        } else {\n          // user is logged out\n          localStorage.removeItem(this.$accessTokenKey);\n        }\n        this.login = localStorage.getItem(this.$accessTokenKey) != null;\n      } else {\n        this.login = false;\n      }\n      global.user = this.user;\n    }\n  },\n  mounted: function () {\n    this.getUser();\n  }\n};","map":{"version":3,"names":["axios","data","login","user","methods","doLogout","response","post","$apiURL","headers","$headers","status","localStorage","removeItem","$accessTokenKey","window","location","href","swal","fire","message","getUser","self","getItem","$user","console","log","global","mounted"],"sources":["D:\\2023\\2023_PTUDW\\chat-station-mevn-free\\chat-station-mevn-free\\web\\src\\components\\layouts\\AppHeader.vue"],"sourcesContent":["<template>\n    <nav class=\"navbar navbar-expand-lg navbar-dark bg-primary\" style=\"margin-bottom: 50px;\">\n        <div class=\"container-fluid\">\n\n            <router-link class=\"navbar-brand\" to=\"/\">\n                Chat Station\n            </router-link>\n\n            <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarColor01\"\n                aria-controls=\"navbarColor01\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n                <span class=\"navbar-toggler-icon\"></span>\n            </button>\n\n            <div class=\"collapse navbar-collapse\" id=\"navbarColor01\">\n                <ul class=\"navbar-nav me-auto\">\n                    <li class=\"nav-item\">\n                        <router-link class=\"nav-link active\" to=\"/\">\n                            Home\n                            <span class=\"visually-hidden\">(current)</span>\n                        </router-link>\n                    </li>\n\n                    <li class=\"nav-item\" v-if=\"!login\">\n                        <router-link class=\"nav-link\" to=\"/login\">Login</router-link>\n                    </li>\n\n                    <li class=\"nav-item\" v-if=\"!login\">\n                        <router-link class=\"nav-link\" to=\"/register\">Register</router-link>\n                    </li>\n\n                    <li class=\"nav-item dropdown\" v-if=\"login\">\n                        <a class=\"nav-link dropdown-toggle\" href=\"#\" v-text=\"$user.name\" id=\"navbarDropdown\" role=\"button\"\n                            data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\"></a>\n                        <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\n                    <li><a class=\"dropdown-item\" v-on:click=\"doLogout\" href=\"javascript:void(0);\">Logout</a></li>\n            </div>\n            </li>\n            </ul>\n\n            <form class=\"d-flex\">\n                <input class=\"form-control me-sm-2\" type=\"text\" v-model=\"query\" placeholder=\"Search\">\n                <button class=\"btn btn-secondary my-2 my-sm-0\" type=\"submit\">Search</button>\n            </form>\n        </div>\n        </div>\n    </nav>\n</template>\n \n<script>\n\nimport axios from \"axios\"\n\nexport default {\n    data() {\n        return {\n            login: false,\n            user: null\n        }\n    },\n\n    methods: {\n\n        doLogout: async function () {\n            const response = await axios.post(\n                this.$apiURL + \"/logout\",\n                null,\n                {\n                    headers: this.$headers\n                }\n            );\n\n            if (response.data.status == \"success\") {\n                // remove access token from local storage\n                localStorage.removeItem(this.$accessTokenKey)\n\n                window.location.href = \"/login\"\n            } else {\n                swal.fire(\"Error\", response.data.message, \"error\");\n            }\n        },\n\n        getUser: async function () {\n            const self = this\n\n            // check if user is logged in\n            if (localStorage.getItem(this.$accessTokenKey)) {\n                const response = await axios.post(\n                    this.$apiURL + \"/getUser\",\n                    null,\n                    {\n                        headers: this.$headers\n                    }\n                )\n\n                if (response.data.status == \"success\") {\n                    // user is logged in\n                    this.$user = response.data.user\n                    console.log(this.$user)\n                } else {\n                    // user is logged out\n                    localStorage.removeItem(this.$accessTokenKey);\n                }\n\n                this.login = (localStorage.getItem(this.$accessTokenKey) != null);\n            } else {\n                this.login = false;\n            }\n\n            global.user = this.user\n        },\n    },\n\n    mounted: function () {\n        this.getUser();\n    }\n}\n</script>"],"mappings":"AAkDA,OAAOA,KAAI,MAAO,OAAM;AAExB,eAAe;EACXC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,KAAK,EAAE,KAAK;MACZC,IAAI,EAAE;IACV;EACJ,CAAC;EAEDC,OAAO,EAAE;IAELC,QAAQ,EAAE,eAAAA,CAAA,EAAkB;MACxB,MAAMC,QAAO,GAAI,MAAMN,KAAK,CAACO,IAAI,CAC7B,IAAI,CAACC,OAAM,GAAI,SAAS,EACxB,IAAI,EACJ;QACIC,OAAO,EAAE,IAAI,CAACC;MAClB,CACJ,CAAC;MAED,IAAIJ,QAAQ,CAACL,IAAI,CAACU,MAAK,IAAK,SAAS,EAAE;QACnC;QACAC,YAAY,CAACC,UAAU,CAAC,IAAI,CAACC,eAAe;QAE5CC,MAAM,CAACC,QAAQ,CAACC,IAAG,GAAI,QAAO;MAClC,OAAO;QACHC,IAAI,CAACC,IAAI,CAAC,OAAO,EAAEb,QAAQ,CAACL,IAAI,CAACmB,OAAO,EAAE,OAAO,CAAC;MACtD;IACJ,CAAC;IAEDC,OAAO,EAAE,eAAAA,CAAA,EAAkB;MACvB,MAAMC,IAAG,GAAI,IAAG;;MAEhB;MACA,IAAIV,YAAY,CAACW,OAAO,CAAC,IAAI,CAACT,eAAe,CAAC,EAAE;QAC5C,MAAMR,QAAO,GAAI,MAAMN,KAAK,CAACO,IAAI,CAC7B,IAAI,CAACC,OAAM,GAAI,UAAU,EACzB,IAAI,EACJ;UACIC,OAAO,EAAE,IAAI,CAACC;QAClB,CACJ;QAEA,IAAIJ,QAAQ,CAACL,IAAI,CAACU,MAAK,IAAK,SAAS,EAAE;UACnC;UACA,IAAI,CAACa,KAAI,GAAIlB,QAAQ,CAACL,IAAI,CAACE,IAAG;UAC9BsB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,KAAK;QAC1B,OAAO;UACH;UACAZ,YAAY,CAACC,UAAU,CAAC,IAAI,CAACC,eAAe,CAAC;QACjD;QAEA,IAAI,CAACZ,KAAI,GAAKU,YAAY,CAACW,OAAO,CAAC,IAAI,CAACT,eAAe,KAAK,IAAK;MACrE,OAAO;QACH,IAAI,CAACZ,KAAI,GAAI,KAAK;MACtB;MAEAyB,MAAM,CAACxB,IAAG,GAAI,IAAI,CAACA,IAAG;IAC1B;EACJ,CAAC;EAEDyB,OAAO,EAAE,SAAAA,CAAA,EAAY;IACjB,IAAI,CAACP,OAAO,CAAC,CAAC;EAClB;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}