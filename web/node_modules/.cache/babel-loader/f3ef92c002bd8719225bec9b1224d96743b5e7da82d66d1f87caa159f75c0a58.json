{"ast":null,"code":"import \"../../public/assets/css/chat.css\";\nimport \"../../public/assets/emoji/emojis.css\";\nimport \"../../public/assets/emoji/DisMojiPicker.js\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\nexport default {\n  data() {\n    return {\n      attachment: null,\n      message: \"\",\n      email: this.$route.params.email,\n      page: 0,\n      receiver: null,\n      base64Str: \"\",\n      downloadFileName: \"\",\n      btnLoadMoreClass: \"fa fa-repeat\",\n      hasMoreMessages: true,\n      selectedMessageId: 0,\n      selectedMessageText: \"\",\n      isShowingBookmarked: false,\n      isArchive: false,\n      password: \"\"\n    };\n  },\n  computed: {\n    messages() {\n      return store.getters.getMessages;\n    }\n  },\n  methods: {\n    verifyArchivedPassword: async function () {\n      const self = this;\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"email\", this.email);\n      const response = await axios.post(this.$apiURL + \"/chat/verifyArchivedPassword\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        this.isArchive = response.data.isArchive;\n        this.password = form.password.value;\n        if (this.isArchive) {\n          store.commit(\"setMessages\", []);\n          this.getData();\n          setTimeout(function () {\n            self.initializeEmoji();\n          }, 500);\n        }\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    showBookmarkedMessages: async function () {\n      store.commit(\"setMessages\", []);\n      if (this.isShowingBookmarked) {\n        this.page = 0;\n        this.getData();\n        this.isShowingBookmarked = false;\n      } else {\n        const formData = new FormData();\n        formData.append(\"email\", this.email);\n        formData.append(\"password\", this.password);\n        const response = await axios.post(this.$apiURL + \"/chat/getBookmarked\", formData, {\n          headers: this.$headers\n        });\n        if (response.data.status == \"success\") {\n          for (let a = 0; a < response.data.data.length; a++) {\n            store.commit(\"prependMessage\", response.data.data[a]);\n          }\n          this.attachEventListeners();\n        } else {\n          swal.fire(\"Error\", response.data.message, \"error\");\n        }\n        this.isShowingBookmarked = true;\n      }\n    },\n    copyMessage: function () {\n      navigator.clipboard.writeText(this.selectedMessageText);\n    },\n    bookmarkMessage: async function () {\n      const target = event.target;\n      const formData = new FormData();\n      formData.append(\"_id\", this.selectedMessageId);\n      formData.append(\"password\", this.password);\n      const response = await axios.post(this.$apiURL + \"/chat/bookmark\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        for (let a = 0; a < this.messages.length; a++) {\n          if (this.messages[a]._id == this.selectedMessageId) {\n            this.messages[a] = response.data.newMessage;\n            break;\n          }\n        }\n        store.commit(\"setMessages\", this.messages);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    hideMoreOptions: function () {\n      document.getElementById(\"contextMenu\").style.display = \"none\";\n    },\n    showMoreOptions: function (msg) {\n      const isMyMessage = event.target.getAttribute(\"is-my-message\");\n      this.selectedMessageId = msg._id;\n      this.selectedMessageText = msg.message;\n      var menu = document.getElementById(\"contextMenu\");\n      menu.style.display = 'block';\n      if (isMyMessage == \"true\") {\n        menu.style.left = event.pageX - 200 + \"px\";\n      } else {\n        menu.style.left = event.pageX + \"px\";\n      }\n      menu.style.top = event.pageY + \"px\";\n      document.querySelector(\".bookmark i\").className = \"fa fa-bookmark-o\";\n      if (msg.bookmarkBy) {\n        document.querySelector(\".bookmark i\").className = \"fa fa-bookmark\";\n      }\n    },\n    attachEventListeners: function () {\n      const self = this;\n      document.addEventListener('click', function (e) {\n        const moreOptions = document.querySelectorAll(\".more-options\");\n        let isClickedMoreOptions = true;\n        for (let a = 0; a < moreOptions.length; a++) {\n          if (moreOptions[a].contains(e.target)) {\n            // Clicked in box\n            isClickedMoreOptions = true;\n            break;\n          } else {\n            // Clicked outside the box\n            isClickedMoreOptions = false;\n          }\n        }\n        if (!isClickedMoreOptions) {\n          self.hideMoreOptions();\n        }\n      });\n    },\n    getChatPersonPicture: function (user) {\n      if (typeof user.picture !== \"undefined\" && user.picture != \"\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar2.png\";\n    },\n    getPicture: function (user) {\n      if (typeof user.picture !== \"undefined\") {\n        return this.$apiURL + \"/\" + user.picture;\n      }\n      return \"../../assets/img/avatar7.png\";\n    },\n    doSearch: async function () {\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"email\", this.email);\n      formData.append(\"password\", this.password);\n      const response = await axios.post(this.$apiURL + \"/chat/search\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        store.commit(\"setMessages\", []);\n        for (let a = 0; a < response.data.data.length; a++) {\n          store.commit(\"prependMessage\", response.data.data[a]);\n        }\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    downloadAttachment: async function () {\n      const anchor = event.target;\n      const id = anchor.getAttribute(\"data-id\");\n      const originalHtml = anchor.innerHTML;\n      anchor.innerHTML = \"Loading...\";\n      const formData = new FormData();\n      formData.append(\"messageId\", id);\n      formData.append(\"password\", this.password);\n      const response = await axios.post(this.$apiURL + \"/chat/attachment\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        this.base64Str = response.data.base64Str;\n        this.downloadFileName = response.data.fileName;\n        const btnDownloadAttachment = this.$refs[\"btnDownloadAttachment\"];\n        setTimeout(function () {\n          btnDownloadAttachment.click();\n          anchor.innerHTML = originalHtml;\n        }, 500);\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    fileSelected: function () {\n      const files = event.target.files;\n      if (files.length > 0) {\n        this.attachment = files[0];\n      }\n    },\n    selectFile: function () {\n      document.getElementById(\"attachment\").click();\n    },\n    getMessageTime: function (time) {\n      const dateObj = new Date(time);\n      let timeStr = dateObj.getFullYear() + \"-\" + (dateObj.getMonth() + 1) + \"-\" + dateObj.getDate() + \" \" + dateObj.getHours() + \":\" + dateObj.getMinutes() + \":\" + dateObj.getSeconds();\n      return timeStr;\n    },\n    loadMore: function () {\n      this.btnLoadMoreClass = \"fa fa-spinner fa-spin\";\n      this.page++;\n      this.getData();\n    },\n    getData: async function () {\n      if (this.email == null) {\n        return;\n      }\n      const formData = new FormData();\n      formData.append(\"email\", this.email);\n      formData.append(\"page\", this.page);\n      formData.append(\"password\", this.password);\n      const response = await axios.post(this.$apiURL + \"/chat/fetch\", formData, {\n        headers: this.$headers\n      });\n      this.btnLoadMoreClass = \"fa fa-repeat\";\n      if (response.data.status == \"success\") {\n        for (let a = 0; a < response.data.messages.length; a++) {\n          store.commit(\"prependMessage\", response.data.messages[a]);\n        }\n        this.hasMoreMessages = response.data.messages.length == 0 ? false : true;\n        this.receiver = response.data.receiver;\n        this.user = response.data.user;\n        this.isArchive = response.data.isArchive;\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    sendMessage: async function () {\n      const formData = new FormData();\n      formData.append(\"email\", this.email);\n      formData.append(\"message\", this.message);\n      formData.append(\"password\", this.password);\n      if (this.attachment != null) {\n        formData.append(\"attachment\", this.attachment);\n      }\n      const response = await axios.post(this.$apiURL + \"/chat/send\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        this.message = \"\";\n        this.attachment = null;\n        document.getElementById(\"attachment\").value = null;\n        store.commit(\"appendMessage\", response.data.messageObject);\n        this.attachEventListeners();\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    initializeEmoji: function () {\n      const self = this;\n      $(\"#emojis\").disMojiPicker();\n      twemoji.parse(document.body);\n      $(\"#emojis\").picker(function (emoji) {\n        self.message += emoji;\n      });\n    }\n  },\n  mounted() {\n    this.getData();\n    this.initializeEmoji();\n\n    /*document.addEventListener(\"click\", function () {\r\n    \tself.hideMoreOptions()\r\n    })\r\n          \t\tdocument.oncontextmenu = function () {\r\n        \t\t\tevent.preventDefault()\r\n                if (document.getElementById(\"contextMenu\").style.display == \"block\"){ \r\n                  hideMenu(); \r\n              }else{ \r\n                  var menu = document.getElementById(\"contextMenu\")      \r\n                  menu.style.display = 'block'; \r\n                  menu.style.left = event.pageX + \"px\"; \r\n                  menu.style.top = event.pageY + \"px\"; \r\n              }\r\n        \t\t}*/\n  },\n\n  watch: {\n    $route: function (to, from) {\n      if (from.href.includes(\"/chat/\")) {\n        store.commit(\"setMessages\", []);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","swal","store","data","attachment","message","email","$route","params","page","receiver","base64Str","downloadFileName","btnLoadMoreClass","hasMoreMessages","selectedMessageId","selectedMessageText","isShowingBookmarked","isArchive","password","computed","messages","getters","getMessages","methods","verifyArchivedPassword","self","form","event","target","formData","FormData","append","response","post","$apiURL","headers","$headers","status","value","commit","getData","setTimeout","initializeEmoji","fire","showBookmarkedMessages","a","length","attachEventListeners","copyMessage","navigator","clipboard","writeText","bookmarkMessage","_id","newMessage","hideMoreOptions","document","getElementById","style","display","showMoreOptions","msg","isMyMessage","getAttribute","menu","left","pageX","top","pageY","querySelector","className","bookmarkBy","addEventListener","e","moreOptions","querySelectorAll","isClickedMoreOptions","contains","getChatPersonPicture","user","picture","getPicture","doSearch","downloadAttachment","anchor","id","originalHtml","innerHTML","fileName","btnDownloadAttachment","$refs","click","fileSelected","files","selectFile","getMessageTime","time","dateObj","Date","timeStr","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","loadMore","sendMessage","messageObject","$","disMojiPicker","twemoji","parse","body","picker","emoji","mounted","watch","to","from","href","includes"],"sources":["D:\\2023\\2023_PTUDW\\chat-station-mevn-free\\chat-station-mevn-free\\web\\src\\components\\ChatComponent.vue"],"sourcesContent":["<template>\r\n\t<div class=\"container\">\r\n\t\t<div class=\"row clearfix\">\r\n\t\t\t<div class=\"col-lg-12\">\r\n\r\n\t\t\t\t<div class=\"card\" v-if=\"isArchive\">\r\n\t\t\t\t\t<div class=\"card-body\">\r\n\t\t\t\t\t\t<h2 class=\"text-center\" style=\"margin-top: 20px;\">This chat has been archived</h2>\r\n\r\n\t\t\t\t\t\t<div class=\"row\" style=\"margin-top: 100px; margin-bottom: 100px;\">\r\n\t\t\t\t\t\t\t<div class=\"offset-md-4 col-md-4\">\r\n\t\t\t\t\t\t\t\t<form v-on:submit.prevent=\"verifyArchivedPassword\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"form-group\" style=\"margin-bottom: 10px;\">\r\n\t\t\t\t\t\t\t\t\t\t<label>Enter password</label>\r\n\t\t\t\t\t\t\t\t\t\t<input type=\"password\" name=\"password\" class=\"form-control\" required style=\"margin-top: 10px;\" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<input type=\"submit\" class=\"btn btn-danger\" value=\"Open chat\" />\r\n\t\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div class=\"card chat-app\" v-if=\"!isArchive\">\r\n\t\t\t\t\t<div class=\"chat\">\r\n\t\t\t\t\t\t<div class=\"chat-header clearfix\">\r\n\t\t\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t\t\t<div class=\"col-lg-6\">\r\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" data-toggle=\"modal\" data-target=\"#view_info\">\r\n\t\t\t\t\t\t\t\t\t\t<img v-if=\"receiver != null\" v-bind:src=\"getChatPersonPicture(receiver)\" alt=\"avatar\" style=\"width: 50px;\" />\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\r\n\t\t\t\t\t\t\t\t\t<div class=\"chat-about\">\r\n\t\t\t\t\t\t\t\t\t\t<h6 class=\"m-b-0 text-white\" v-if=\"receiver != null\" v-text=\"receiver.name\" style=\"margin-bottom: 0px; position: relative; top: 10px;\"></h6>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t<div class=\"col-lg-6 hidden-sm text-right text-white\">\r\n\r\n\t\t\t\t\t\t\t\t\t<button type=\"button\" class=\"btn btn-primary\" style=\"margin-right: 10px;\" v-on:click=\"showBookmarkedMessages\" v-text=\"isShowingBookmarked ? 'All messages' : 'Bookmarked messages'\"></button>\r\n\r\n\t\t\t\t\t\t\t\t\t<form style=\"display: inline-block;\" v-on:submit.prevent=\"doSearch\">\r\n\t\t\t\t\t\t\t\t\t\t<div class=\"form-group\" style=\"display: flex;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<input type=\"search\" name=\"search\" autocomplete=\"off\" />\r\n\t\t\t\t\t\t\t\t\t\t\t<button type=\"submit\" class=\"btn btn-link\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<i class=\"fa fa-search\"></i>\r\n\t\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</form>\r\n\r\n\t\t\t\t\t\t\t\t\t<span v-if=\"attachment != null\" style=\"margin-right: 10px; position: relative; top: 7px;\" v-text=\"attachment.name\"></span>\r\n\t\t\t\t\t\t\t\t\t<a href=\"javascript:void(0);\" class=\"btn btn-outline-secondary pull-right text-white\" v-on:click=\"selectFile\"><i class=\"fa fa-paperclip\"></i></a>\r\n\t\t\t\t\t\t\t\t\t<input type=\"file\" id=\"attachment\" style=\"display: none;\" v-on:change=\"fileSelected\" />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"chat-history\">\r\n\t\t\t\t\t\t\t<ul class=\"m-b-0\">\r\n\t\t\t\t\t\t\t\t<li style=\"text-align: center;\">\r\n\t\t\t\t\t\t\t\t\t<i v-bind:class=\"btnLoadMoreClass + ' btnLoadMore'\" v-on:click=\"loadMore\" v-if=\"hasMoreMessages\"></i>\r\n\t\t\t\t\t\t\t\t</li>\r\n\r\n\t\t\t\t\t\t\t\t<li v-for=\"msg in messages\" class=\"clearfix\" v-bind:key=\"msg._id\">\r\n\t\t\t\t\t\t\t\t\t<div class=\"more-options\" v-on:click=\"showMoreOptions(msg)\" v-bind:is-my-message=\"(user != null && user.email == msg.sender.email)\" v-bind:style=\"(user != null && user.email == msg.sender.email) ? { 'float': 'right' } : { 'position': 'relative', 'top': '15px' }\"></div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div v-bind:class=\"'message ' + (user != null && user.email == msg.sender.email ? 'my-message float-right' : 'other-message')\">\r\n\t\t\t\t\t\t\t\t\t\t<p v-text=\"msg.message\" v-bind:class=\"(user != null && user.email == msg.sender.email ? 'text-right' : '')\" style=\"margin-bottom: 0px;\"></p>\r\n\r\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"msg.attachment != null\">\r\n\t\t\t\t\t\t\t\t\t\t    <a href=\"javascript:void(0)\" v-bind:data-id=\"msg._id\" v-on:click.prevent=\"downloadAttachment\" v-text=\"msg.attachment.displayName\" class=\"text-info\" target=\"_blank\"></a>\r\n\t\t\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div v-bind:class=\"'message-data ' + (user != null && user.email == msg.sender.email ? 'float-right' : '')\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"message-data-time text-white\" v-text=\"getMessageTime(msg.createdAt)\" style=\"margin-right: 10px;\"></span>\r\n\t\t\t\t\t\t\t\t\t\t<img v-bind:src=\"getPicture(msg.sender)\" alt=\"avatar\" style=\"width: 100px;\" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</li>\r\n\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div class=\"chat-message clearfix\">\r\n\t\t\t\t\t\t\t<div class=\"input-group mb-0\">\r\n\t\t\t\t\t\t\t\t<div class=\"input-group mb-3\">\r\n\t\t\t\t\t\t\t\t\t<input type=\"text\" class=\"form-control send-message\" placeholder=\"Enter text here...\" v-model=\"message\" />\r\n\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn-primary\" v-on:click=\"sendMessage\" type=\"button\">Send</button>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div id=\"emojis\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<a v-bind:href=\"base64Str\" ref=\"btnDownloadAttachment\" v-bind:download=\"downloadFileName\"></a>\r\n\r\n\t<div id=\"contextMenu\" class=\"context-menu\" style=\"display: none\"> \r\n        <ul class=\"menu\"> \r\n            <li class=\"copy\"><a href=\"javascript:void(0)\" v-on:click=\"copyMessage\"><i class=\"fa fa-copy\" aria-hidden=\"true\"></i> Copy</a></li>\r\n\r\n            <li class=\"bookmark\"><a href=\"javascript:void(0)\" v-on:click=\"bookmarkMessage\"><i class=\"fa fa-bookmark-o\" aria-hidden=\"true\"></i> Bookmark</a></li>\r\n        </ul> \r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\timport \"../../public/assets/css/chat.css\"\r\n\timport \"../../public/assets/emoji/emojis.css\"\r\n\timport \"../../public/assets/emoji/DisMojiPicker.js\"\r\n\t\r\n\timport axios from \"axios\"\r\n\timport swal from \"sweetalert2\"\r\n\timport store from \"../vuex/store\"\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tattachment: null,\r\n\t\t\t\tmessage: \"\",\r\n\t\t\t\temail: this.$route.params.email,\r\n\t\t\t\tpage: 0,\r\n\t\t\t\treceiver: null,\r\n\t\t\t\tbase64Str: \"\",\r\n\t\t\t\tdownloadFileName: \"\",\r\n\t\t\t\tbtnLoadMoreClass: \"fa fa-repeat\",\r\n\t\t\t\thasMoreMessages: true,\r\n\t\t\t\tselectedMessageId: 0,\r\n\t\t\t\tselectedMessageText: \"\",\r\n\t\t\t\tisShowingBookmarked: false,\r\n\t\t\t\tisArchive: false,\r\n\t\t\t\tpassword: \"\"\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcomputed: {\r\n\t\t    messages() {\r\n\t\t        return store.getters.getMessages\r\n\t\t    }\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\r\n\t\t\tverifyArchivedPassword: async function () {\r\n\t\t\t\tconst self = this\r\n\t\t\t\tconst form = event.target\r\n\t\t\t\tconst formData = new FormData(form)\r\n\t\t\t\tformData.append(\"email\", this.email)\r\n\t\t\t    \r\n\t\t\t    const response = await axios.post(\r\n\t\t\t        this.$apiURL + \"/chat/verifyArchivedPassword\",\r\n\t\t\t        formData,\r\n\t\t\t        {\r\n\t\t\t            headers: this.$headers\r\n\t\t\t        }\r\n\t\t\t    )\r\n\r\n\t\t\t    if (response.data.status == \"success\") {\r\n\t\t\t    \tthis.isArchive = response.data.isArchive\r\n\t\t\t    \tthis.password = form.password.value\r\n\r\n\t\t\t    \tif (this.isArchive) {\r\n\t\t\t    \t\tstore.commit(\"setMessages\", [])\r\n\t\t\t\t    \tthis.getData()\r\n\r\n\t\t\t\t    \tsetTimeout(function () {\r\n\t\t\t\t    \t\tself.initializeEmoji()\r\n\t\t\t\t    \t}, 500)\r\n\t\t\t\t    }\r\n\t\t\t    } else {\r\n\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\r\n\t\t\t    }\r\n\t\t\t},\r\n\r\n\t\t\tshowBookmarkedMessages: async function () {\r\n\t\t\t\tstore.commit(\"setMessages\", [])\r\n\r\n\t\t\t\tif (this.isShowingBookmarked) {\r\n\t\t\t\t\tthis.page = 0\r\n\t\t\t\t\tthis.getData()\r\n\t\t\t\t\tthis.isShowingBookmarked = false\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconst formData = new FormData()\r\n\t\t\t\t\tformData.append(\"email\", this.email)\r\n\t\t\t\t\tformData.append(\"password\", this.password)\r\n\t\t\t\t    \r\n\t\t\t\t    const response = await axios.post(\r\n\t\t\t\t        this.$apiURL + \"/chat/getBookmarked\",\r\n\t\t\t\t        formData,\r\n\t\t\t\t        {\r\n\t\t\t\t            headers: this.$headers\r\n\t\t\t\t        }\r\n\t\t\t\t    )\r\n\r\n\t\t\t\t    if (response.data.status == \"success\") {\r\n\t\t\t\t    \tfor (let a = 0; a < response.data.data.length; a++) {\r\n\t\t\t\t\t\t\tstore.commit(\"prependMessage\", response.data.data[a])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.attachEventListeners()\r\n\t\t\t\t    } else {\r\n\t\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\r\n\t\t\t\t    }\r\n\r\n\t\t\t\t    this.isShowingBookmarked = true\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tcopyMessage: function() {\r\n\t\t\t\tnavigator.clipboard.writeText(this.selectedMessageText)\r\n\t\t\t},\r\n\r\n\t\t\tbookmarkMessage: async function() {\r\n\t\t\t\tconst target = event.target\r\n\t\t\t\tconst formData = new FormData()\r\n\t\t\t\tformData.append(\"_id\", this.selectedMessageId)\r\n\t\t\t\tformData.append(\"password\", this.password)\r\n\t\t\t    \r\n\t\t\t    const response = await axios.post(\r\n\t\t\t        this.$apiURL + \"/chat/bookmark\",\r\n\t\t\t        formData,\r\n\t\t\t        {\r\n\t\t\t            headers: this.$headers\r\n\t\t\t        }\r\n\t\t\t    )\r\n\r\n\t\t\t    if (response.data.status == \"success\") {\r\n\t\t\t    \tfor (let a = 0; a < this.messages.length; a++) {\r\n\t\t\t    \t\tif (this.messages[a]._id == this.selectedMessageId) {\r\n\t\t\t    \t\t\tthis.messages[a] = response.data.newMessage\r\n\t\t\t    \t\t\tbreak\r\n\t\t\t    \t\t}\r\n\t\t\t    \t}\r\n\t\t\t    \tstore.commit(\"setMessages\", this.messages)\r\n\t\t\t    } else {\r\n\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\r\n\t\t\t    }\r\n\t\t\t},\r\n\r\n\t\t\thideMoreOptions: function () {\r\n\t\t\t\tdocument.getElementById(\"contextMenu\").style.display = \"none\"\r\n\t\t\t},\r\n\r\n\t\t\tshowMoreOptions: function (msg) {\r\n\t\t\t\tconst isMyMessage = event.target.getAttribute(\"is-my-message\")\r\n\t\t\t\tthis.selectedMessageId = msg._id\r\n\t\t\t\tthis.selectedMessageText = msg.message\r\n\t\t\t\t\r\n\t\t\t\tvar menu = document.getElementById(\"contextMenu\")\r\n                menu.style.display = 'block'\r\n                if (isMyMessage == \"true\") {\r\n                \tmenu.style.left = (event.pageX - 200) + \"px\"\r\n                } else {\r\n                \tmenu.style.left = event.pageX + \"px\"\r\n                }\r\n                menu.style.top = event.pageY + \"px\"\r\n\r\n                document.querySelector(\".bookmark i\").className = \"fa fa-bookmark-o\"\r\n\r\n                if (msg.bookmarkBy) {\r\n                \tdocument.querySelector(\".bookmark i\").className = \"fa fa-bookmark\"\r\n                }\r\n\t\t\t},\r\n\r\n\t\t\tattachEventListeners: function() {\r\n\t\t\t\tconst self = this\r\n\r\n\t\t\t\tdocument.addEventListener('click', function(e) {\r\n\t\t\t\t\tconst moreOptions = document.querySelectorAll(\".more-options\")\r\n\t\t\t\t\tlet isClickedMoreOptions = true\r\n\t\t\t\t\tfor (let a = 0; a < moreOptions.length; a++) {\r\n\t\t\t\t\t\tif (moreOptions[a].contains(e.target)) {\r\n\t\t\t\t\t\t\t// Clicked in box\r\n\t\t\t\t\t\t\tisClickedMoreOptions = true\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Clicked outside the box\r\n\t\t\t\t\t\t\tisClickedMoreOptions = false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!isClickedMoreOptions) {\r\n\t\t\t\t\t\tself.hideMoreOptions()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tgetChatPersonPicture: function (user) {\r\n\t\t\t\tif (typeof user.picture !== \"undefined\" && user.picture != \"\") {\r\n\t\t\t\t\treturn this.$apiURL + \"/\" + user.picture\r\n\t\t\t\t}\r\n\t\t\t\treturn \"../../assets/img/avatar2.png\"\r\n\t\t\t},\r\n\r\n\t\t\tgetPicture: function (user) {\r\n\t\t\t\tif (typeof user.picture !== \"undefined\") {\r\n\t\t\t\t\treturn this.$apiURL + \"/\" + user.picture\r\n\t\t\t\t}\r\n\t\t\t\treturn \"../../assets/img/avatar7.png\"\r\n\t\t\t},\r\n\r\n\t\t\tdoSearch: async function () {\r\n\t\t\t\tconst form = event.target\r\n\t\t\t\tconst formData = new FormData(form)\r\n\t\t\t\tformData.append(\"email\", this.email)\r\n\t\t\t\tformData.append(\"password\", this.password)\r\n\t\t\t    \r\n\t\t\t    const response = await axios.post(\r\n\t\t\t        this.$apiURL + \"/chat/search\",\r\n\t\t\t        formData,\r\n\t\t\t        {\r\n\t\t\t            headers: this.$headers\r\n\t\t\t        }\r\n\t\t\t    )\r\n\r\n\t\t\t    if (response.data.status == \"success\") {\r\n\t\t\t    \tstore.commit(\"setMessages\", [])\r\n\t\t\t    \tfor (let a = 0; a < response.data.data.length; a++) {\r\n\t\t\t\t\t\tstore.commit(\"prependMessage\", response.data.data[a])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.attachEventListeners()\r\n\t\t\t    } else {\r\n\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\r\n\t\t\t    }\r\n\t\t\t},\r\n\r\n\t\t\tdownloadAttachment: async function () {\r\n\t\t\t    const anchor = event.target\r\n\t\t\t    const id = anchor.getAttribute(\"data-id\")\r\n\t\t\t    const originalHtml = anchor.innerHTML\r\n\t\t\t    anchor.innerHTML = \"Loading...\"\r\n\r\n\t\t\t    const formData = new FormData()\r\n\t\t\t    formData.append(\"messageId\", id)\r\n\t\t\t    formData.append(\"password\", this.password)\r\n\t\t\t    \r\n\t\t\t    const response = await axios.post(\r\n\t\t\t        this.$apiURL + \"/chat/attachment\",\r\n\t\t\t        formData,\r\n\t\t\t        {\r\n\t\t\t            headers: this.$headers\r\n\t\t\t        }\r\n\t\t\t    )\r\n\r\n\t\t\t    if (response.data.status == \"success\") {\r\n\t\t\t        this.base64Str = response.data.base64Str\r\n\t\t\t        this.downloadFileName = response.data.fileName\r\n\t\t\t        \r\n\t\t\t        const btnDownloadAttachment = this.$refs[\"btnDownloadAttachment\"]\r\n\t\t\t        setTimeout(function () {\r\n\t\t\t            btnDownloadAttachment.click()\r\n\t\t\t            anchor.innerHTML = originalHtml\r\n\t\t\t        }, 500)\r\n\t\t\t    } else {\r\n\t\t\t        swal.fire(\"Error\", response.data.message, \"error\")\r\n\t\t\t    }\r\n\t\t\t},\r\n\r\n\t\t\tfileSelected: function () {\r\n\t\t\t\tconst files = event.target.files\r\n\t\t\t\tif (files.length > 0) {\r\n\t\t\t\t\tthis.attachment = files[0]\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tselectFile: function () {\r\n\t\t\t\tdocument.getElementById(\"attachment\").click()\r\n\t\t\t},\r\n\r\n\t\t\tgetMessageTime: function (time) {\r\n\t\t\t\tconst dateObj = new Date(time)\r\n\t\t\t\tlet timeStr = dateObj.getFullYear() + \"-\" + (dateObj.getMonth() + 1) + \"-\" + dateObj.getDate() + \" \" + dateObj.getHours() + \":\" + dateObj.getMinutes() + \":\" + dateObj.getSeconds()\r\n\t\t\t\treturn timeStr\r\n\t\t\t},\r\n\r\n\t\t\tloadMore: function () {\r\n\t\t\t\tthis.btnLoadMoreClass = \"fa fa-spinner fa-spin\"\r\n\t\t\t\tthis.page++\r\n\t\t\t\tthis.getData()\r\n\t\t\t},\r\n\r\n\t\t\tgetData: async function () {\r\n\t\t\t\tif (this.email == null) {\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst formData = new FormData()\r\n\t\t\t\tformData.append(\"email\", this.email)\r\n\t\t\t\tformData.append(\"page\", this.page)\r\n\t\t\t\tformData.append(\"password\", this.password)\r\n\r\n\t\t\t\tconst response = await axios.post(\r\n\t\t\t\t\tthis.$apiURL + \"/chat/fetch\",\r\n\t\t\t\t\tformData,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\theaders: this.$headers\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\r\n\t\t\t\tthis.btnLoadMoreClass = \"fa fa-repeat\"\r\n\r\n\t\t\t\tif (response.data.status == \"success\") {\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (let a = 0; a < response.data.messages.length; a++) {\r\n\t\t\t\t\t\tstore.commit(\"prependMessage\", response.data.messages[a])\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.hasMoreMessages = (response.data.messages.length == 0) ? false : true\r\n\t\t\t\t\tthis.receiver = response.data.receiver\r\n\t\t\t\t\tthis.user = response.data.user\r\n\t\t\t\t\tthis.isArchive = response.data.isArchive\r\n\t\t\t\t\tthis.attachEventListeners()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tswal.fire(\"Error\", response.data.message, \"error\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tsendMessage: async function () {\r\n\r\n\t\t\t\tconst formData = new FormData()\r\n\t\t\t\tformData.append(\"email\", this.email)\r\n\t\t\t\tformData.append(\"message\", this.message)\r\n\t\t\t\tformData.append(\"password\", this.password)\r\n\t\t\t\tif (this.attachment != null) {\r\n\t\t\t\t\tformData.append(\"attachment\", this.attachment)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst response = await axios.post(\r\n\t\t\t\t\tthis.$apiURL + \"/chat/send\",\r\n\t\t\t\t\tformData,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\theaders: this.$headers\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\r\n\t\t\t\tif (response.data.status == \"success\") {\r\n\t\t\t\t\tthis.message = \"\"\r\n\r\n\t\t\t\t\tthis.attachment = null\r\n\t\t\t\t\tdocument.getElementById(\"attachment\").value = null\r\n\r\n\t\t\t\t\tstore.commit(\"appendMessage\", response.data.messageObject)\r\n\t\t\t\t\tthis.attachEventListeners()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tswal.fire(\"Error\", response.data.message, \"error\")\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tinitializeEmoji: function() {\r\n\t\t\t\tconst self = this\r\n\t\t\t\t$(\"#emojis\").disMojiPicker()\r\n\t\t\t\ttwemoji.parse(document.body)\r\n\t\t\t\t$(\"#emojis\").picker(function (emoji) {\r\n\t\t\t\t\tself.message += emoji\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmounted() {\r\n\t\t\tthis.getData()\r\n\t\t\tthis.initializeEmoji()\r\n\r\n\t\t\t/*document.addEventListener(\"click\", function () {\r\n\t\t\t\tself.hideMoreOptions()\r\n\t\t\t})\r\n\r\n       \t\tdocument.oncontextmenu = function () {\r\n       \t\t\tevent.preventDefault()\r\n\r\n\t            if (document.getElementById(\"contextMenu\").style.display == \"block\"){ \r\n\t                hideMenu(); \r\n\t            }else{ \r\n\t                var menu = document.getElementById(\"contextMenu\")      \r\n\t                menu.style.display = 'block'; \r\n\t                menu.style.left = event.pageX + \"px\"; \r\n\t                menu.style.top = event.pageY + \"px\"; \r\n\t            }\r\n       \t\t}*/\r\n\t\t},\r\n\r\n\t\twatch: {\r\n            $route: function (to, from) {\r\n                if (from.href.includes(\"/chat/\")) {\r\n                \tstore.commit(\"setMessages\", [])\r\n                }\r\n            }\r\n        },\r\n\t}\r\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}