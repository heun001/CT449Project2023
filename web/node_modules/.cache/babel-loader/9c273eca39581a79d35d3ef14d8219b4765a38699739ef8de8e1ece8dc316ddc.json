{"ast":null,"code":"import axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport store from \"../vuex/store\";\nexport default {\n  data() {\n    return {\n      isDisabled: false,\n      picture: \"\"\n    };\n  },\n  methods: {\n    previewImage: function () {\n      const self = this;\n      const files = event.target.files;\n      if (files.length > 0) {\n        const fileReader = new FileReader();\n        fileReader.onload = function () {\n          self.picture = event.target.result;\n        };\n        fileReader.readAsDataURL(files[0]);\n      }\n    },\n    updateProfile: async function () {\n      this.isDisabled = true;\n      const form = event.target;\n      const formData = new FormData(form);\n      const response = await axios.post(this.$apiURL + \"/updateProfile\", formData, {\n        headers: this.$headers\n      });\n      this.isDisabled = false;\n      store.commit(\"setUser\", response.data.user);\n      swal.fire(\"Profile update\", response.data.message, response.data.status);\n    }\n  },\n  mounted: function () {\n    const self = this;\n    setTimeout(function () {\n      if (self.user != null) {\n        self.picture = self.$apiURL + \"/\" + self.user.picture;\n      }\n    }, 100);\n  },\n  computed: {\n    user() {\n      return store.getters.getUser;\n    }\n  }\n};","map":{"version":3,"names":["axios","swal","store","data","isDisabled","picture","methods","previewImage","self","files","event","target","length","fileReader","FileReader","onload","result","readAsDataURL","updateProfile","form","formData","FormData","response","post","$apiURL","headers","$headers","commit","user","fire","message","status","mounted","setTimeout","computed","getters","getUser"],"sources":["D:\\2023\\2023_PTUDW\\chat-station-mevn-free\\chat-station-mevn-free\\web\\src\\components\\ProfileComponent.vue"],"sourcesContent":["<template>\n\t<div class=\"container\" style=\"margin-top: 50px;\">\n\t\t<div class=\"row\">\n\t\t\t<div class=\"col-md-12\">\n\t\t\t\t<h1 class=\"text-center\">Profile</h1>\n\t\t\t\t<img v-bind:src=\"picture\" style=\"width: 100%;\" />\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"row\" style=\"margin-top: 30px;\">\n\t\t\t<div class=\"offset-md-3 col-md-6\">\n\t\t\t\t<form v-on:submit.prevent=\"updateProfile\" enctype=\"multipart/form-data\">\n\t\t\t\t\t<input type=\"file\" name=\"picture\" accept=\"image/*\" class=\"form-control\" v-on:change=\"previewImage\" />\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label>Name</label>\n\t\t\t\t\t\t<input type=\"text\" name=\"name\" class=\"form-control\" v-bind:value=\"user.name\" required />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<br />\n\n\t\t\t\t\t<div class=\"form-group\">\n\t\t\t\t\t\t<label>Email</label>\n\t\t\t\t\t\t<input type=\"email\" name=\"email\" class=\"form-control\" v-bind:value=\"user.email\" disabled />\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<br />\t\t\t\t\t\n\n\t\t\t\t\t<input type=\"submit\" class=\"btn btn-primary\" value=\"Update profile\" v-bind:disabled=\"isDisabled\" />\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script>\n\n\timport axios from \"axios\"\n\timport swal from \"sweetalert2\"\n\timport store from \"../vuex/store\"\n\n\texport default {\n\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tisDisabled: false,\n\t\t\t\tpicture: \"\"\n\t\t\t}\n\t\t},\n\n\t\tmethods: {\n\t\t\tpreviewImage: function () {\n\t\t\t\tconst self = this\n\t\t\t\tconst files = event.target.files\n\t\t\t\tif (files.length > 0) {\n\t\t\t\t\tconst fileReader = new FileReader()\n\n\t\t\t\t\tfileReader.onload = function () {\n\t\t\t\t\t\tself.picture = event.target.result\n\t\t\t\t\t}\n\n\t\t\t\t\tfileReader.readAsDataURL(files[0])\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tupdateProfile: async function () {\n\t\t\t\tthis.isDisabled = true\n\n\t\t\t\tconst form = event.target\n\t\t\t\tconst formData = new FormData(form)\n\n\t\t\t\tconst response = await axios.post(\n\t\t\t\t\tthis.$apiURL + \"/updateProfile\",\n\t\t\t\t\tformData,\n\t\t\t\t\t{\n\t\t\t\t\t\theaders: this.$headers\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tthis.isDisabled = false\n\t\t\t\tstore.commit(\"setUser\", response.data.user)\n\n\t\t\t\tswal.fire(\"Profile update\", response.data.message, response.data.status)\n\t\t\t}\n\t\t},\n\n\t\tmounted: function () {\n\t\t\tconst self = this\n\t\t\tsetTimeout(function () {\n\t\t\t\tif (self.user != null) {\n\t\t\t\t\tself.picture = self.$apiURL + \"/\" + self.user.picture\n\t\t\t\t}\n\t\t\t}, 100)\n\t\t},\n\n\t\tcomputed: {\n\t\t\tuser() {\n\t\t\t\treturn store.getters.getUser\n\t\t\t}\n\t\t}\n\t}\n</script>"],"mappings":"AAqCC,OAAOA,KAAI,MAAO,OAAM;AACxB,OAAOC,IAAG,MAAO,aAAY;AAC7B,OAAOC,KAAI,MAAO,eAAc;AAEhC,eAAe;EAEdC,IAAIA,CAAA,EAAG;IACN,OAAO;MACNC,UAAU,EAAE,KAAK;MACjBC,OAAO,EAAE;IACV;EACD,CAAC;EAEDC,OAAO,EAAE;IACRC,YAAY,EAAE,SAAAA,CAAA,EAAY;MACzB,MAAMC,IAAG,GAAI,IAAG;MAChB,MAAMC,KAAI,GAAIC,KAAK,CAACC,MAAM,CAACF,KAAI;MAC/B,IAAIA,KAAK,CAACG,MAAK,GAAI,CAAC,EAAE;QACrB,MAAMC,UAAS,GAAI,IAAIC,UAAU,CAAC;QAElCD,UAAU,CAACE,MAAK,GAAI,YAAY;UAC/BP,IAAI,CAACH,OAAM,GAAIK,KAAK,CAACC,MAAM,CAACK,MAAK;QAClC;QAEAH,UAAU,CAACI,aAAa,CAACR,KAAK,CAAC,CAAC,CAAC;MAClC;IACD,CAAC;IAEDS,aAAa,EAAE,eAAAA,CAAA,EAAkB;MAChC,IAAI,CAACd,UAAS,GAAI,IAAG;MAErB,MAAMe,IAAG,GAAIT,KAAK,CAACC,MAAK;MACxB,MAAMS,QAAO,GAAI,IAAIC,QAAQ,CAACF,IAAI;MAElC,MAAMG,QAAO,GAAI,MAAMtB,KAAK,CAACuB,IAAI,CAChC,IAAI,CAACC,OAAM,GAAI,gBAAgB,EAC/BJ,QAAQ,EACR;QACCK,OAAO,EAAE,IAAI,CAACC;MACf,CACD;MACA,IAAI,CAACtB,UAAS,GAAI,KAAI;MACtBF,KAAK,CAACyB,MAAM,CAAC,SAAS,EAAEL,QAAQ,CAACnB,IAAI,CAACyB,IAAI;MAE1C3B,IAAI,CAAC4B,IAAI,CAAC,gBAAgB,EAAEP,QAAQ,CAACnB,IAAI,CAAC2B,OAAO,EAAER,QAAQ,CAACnB,IAAI,CAAC4B,MAAM;IACxE;EACD,CAAC;EAEDC,OAAO,EAAE,SAAAA,CAAA,EAAY;IACpB,MAAMxB,IAAG,GAAI,IAAG;IAChByB,UAAU,CAAC,YAAY;MACtB,IAAIzB,IAAI,CAACoB,IAAG,IAAK,IAAI,EAAE;QACtBpB,IAAI,CAACH,OAAM,GAAIG,IAAI,CAACgB,OAAM,GAAI,GAAE,GAAIhB,IAAI,CAACoB,IAAI,CAACvB,OAAM;MACrD;IACD,CAAC,EAAE,GAAG;EACP,CAAC;EAED6B,QAAQ,EAAE;IACTN,IAAIA,CAAA,EAAG;MACN,OAAO1B,KAAK,CAACiC,OAAO,CAACC,OAAM;IAC5B;EACD;AACD"},"metadata":{},"sourceType":"module","externalDependencies":[]}