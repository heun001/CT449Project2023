{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-fluid\",\n  id: \"home-page\",\n  style: {\n    \"padding-top\": \"50px\",\n    \"padding-bottom\": \"50px\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"row\",\n  style: {\n    \"margin-bottom\": \"50px\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"offset-md-10 col-md-2\"\n};\nconst _hoisted_4 = {\n  class: \"container-fluid h-100\"\n};\nconst _hoisted_5 = {\n  class: \"row justify-content-center h-100\"\n};\nconst _hoisted_6 = {\n  class: \"col-md-4 col-xl-3 chat\"\n};\nconst _hoisted_7 = {\n  class: \"card mb-sm-3 mb-md-0 contacts_card\"\n};\nconst _hoisted_8 = {\n  class: \"card-header\"\n};\nconst _hoisted_9 = {\n  class: \"input-group\"\n};\nconst _hoisted_10 = {\n  class: \"input-group-prepend\"\n};\nconst _hoisted_11 = {\n  class: \"input-group-text search_btn\"\n};\nconst _hoisted_12 = {\n  class: \"card-body contacts_body\"\n};\nconst _hoisted_13 = {\n  class: \"contacts\"\n};\nconst _hoisted_14 = {\n  class: \"d-flex bd-highlight\"\n};\nconst _hoisted_15 = {\n  class: \"user_info\"\n};\nconst _hoisted_16 = [\"textContent\", \"data-id\", \"data-name\", \"data-is-archive\"];\nconst _hoisted_17 = [\"textContent\"];\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"card-footer\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_19 = {\n  class: \"col-md-8 col-xl-6 chat\"\n};\nconst _hoisted_20 = {\n  class: \"card\"\n};\nconst _hoisted_21 = {\n  class: \"card-header msg_head\"\n};\nconst _hoisted_22 = {\n  class: \"d-flex bd-highlight\"\n};\nconst _hoisted_23 = {\n  class: \"user_info\"\n};\nconst _hoisted_24 = [\"textContent\"];\nconst _hoisted_25 = [\"textContent\"];\nconst _hoisted_26 = {\n  class: \"card-body msg_card_body\"\n};\nconst _hoisted_27 = {\n  key: 0,\n  class: \"d-flex justify-content-end mb-4\"\n};\nconst _hoisted_28 = {\n  class: \"msg_cotainer_send\"\n};\nconst _hoisted_29 = [\"onClick\"];\nconst _hoisted_30 = [\"textContent\"];\nconst _hoisted_31 = [\"textContent\"];\nconst _hoisted_32 = {\n  class: \"img_cont_msg\"\n};\nconst _hoisted_33 = [\"src\"];\nconst _hoisted_34 = {\n  key: 1,\n  class: \"d-flex justify-content-start mb-4\"\n};\nconst _hoisted_35 = {\n  class: \"img_cont_msg\"\n};\nconst _hoisted_36 = [\"src\"];\nconst _hoisted_37 = {\n  class: \"msg_cotainer\"\n};\nconst _hoisted_38 = [\"onClick\"];\nconst _hoisted_39 = [\"textContent\"];\nconst _hoisted_40 = [\"textContent\"];\nconst _hoisted_41 = {\n  class: \"card-footer\"\n};\nconst _hoisted_42 = {\n  class: \"input-group\"\n};\nconst _hoisted_43 = {\n  class: \"input-group-append\"\n};\nconst _hoisted_44 = {\n  class: \"input-group-text send_btn\"\n};\nconst _hoisted_45 = {\n  id: \"contextMenuContactOptions\",\n  class: \"context-menu\",\n  style: {\n    \"display\": \"none\"\n  }\n};\nconst _hoisted_46 = {\n  class: \"menu\"\n};\nconst _hoisted_47 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-trash\",\n  \"aria-hidden\": \"true\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_48 = {\n  id: \"contextMenu\",\n  class: \"context-menu\",\n  style: {\n    \"display\": \"none\"\n  }\n};\nconst _hoisted_49 = {\n  class: \"menu\"\n};\nconst _hoisted_50 = {\n  class: \"copy\"\n};\nconst _hoisted_51 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fa fa-copy\",\n  \"aria-hidden\": \"true\"\n}, null, -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    class: \"btn btn-primary\",\n    to: \"/contacts/add\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Add Contact\")]),\n    _: 1 /* STABLE */\n  })])]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    placeholder: \"Search...\",\n    class: \"form-control search\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchContact = $event),\n    onKeypress: _cache[1] || (_cache[1] = (...args) => $options.onSearchKeyPress && $options.onSearchKeyPress(...args)),\n    onKeyup: _cache[2] || (_cache[2] = (...args) => $options.onSearchKeyUp && $options.onSearchKeyUp(...args))\n  }, null, 544 /* HYDRATE_EVENTS, NEED_PATCH */), [[_vModelText, $data.searchContact]]), _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"span\", _hoisted_11, [_createElementVNode(\"i\", {\n    class: \"fa fa-search\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.doSearchContact && $options.doSearchContact(...args))\n  })])])])]), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"ul\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.contacts, contact => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: contact._id,\n      class: _normalizeClass(contact._id == $data._id ? 'active' : '')\n    }, [_createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, [_createElementVNode(\"span\", {\n      textContent: _toDisplayString(contact.name),\n      style: {\n        \"cursor\": \"pointer\"\n      },\n      \"data-id\": contact._id,\n      \"data-name\": contact.name,\n      \"data-is-archive\": contact.isArchive,\n      onClick: _cache[4] || (_cache[4] = (...args) => $options.onChatSelected && $options.onChatSelected(...args))\n    }, null, 8 /* PROPS */, _hoisted_16), contact.unreadMessages > 0 ? (_openBlock(), _createElementBlock(\"p\", {\n      key: 0,\n      textContent: _toDisplayString(' (' + contact.unreadMessages + ')'),\n      class: \"text-danger\"\n    }, null, 8 /* PROPS */, _hoisted_17)) : _createCommentVNode(\"v-if\", true)])])], 2 /* CLASS */);\n  }), 128 /* KEYED_FRAGMENT */))])]), _hoisted_18])]), _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"div\", _hoisted_21, [_createElementVNode(\"div\", _hoisted_22, [_createElementVNode(\"div\", _hoisted_23, [_createElementVNode(\"span\", null, [_createTextVNode(\"Chat with \"), _createElementVNode(\"span\", {\n    textContent: _toDisplayString($data.name)\n  }, null, 8 /* PROPS */, _hoisted_24)]), _createElementVNode(\"p\", null, [_createElementVNode(\"span\", {\n    textContent: _toDisplayString(_ctx.totalMessages),\n    style: {\n      \"font-size\": \"10px\",\n      \"color\": \"rgba(255,255,255,0.6)\"\n    }\n  }, null, 8 /* PROPS */, _hoisted_25), _createTextVNode(\" Messages\")])])]), _createElementVNode(\"span\", {\n    id: \"action_menu_btn\",\n    class: \"more-options\",\n    onClick: _cache[5] || (_cache[5] = (...args) => $options.showContactOptions && $options.showContactOptions(...args))\n  })]), _createElementVNode(\"div\", _hoisted_26, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.messages, msg => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: msg._id\n    }, [_ctx.user != null && _ctx.user.email == msg.sender.email ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [_createElementVNode(\"div\", _hoisted_28, [_createElementVNode(\"template\", {\n      class: \"more-options\",\n      onClick: $event => $options.showMoreOptions(msg),\n      \"is-my-message\": true\n    }, [_createElementVNode(\"span\", {\n      textContent: _toDisplayString(msg.message)\n    }, null, 8 /* PROPS */, _hoisted_30)], 8 /* PROPS */, _hoisted_29), _createElementVNode(\"p\", {\n      class: \"msg_time message-data-time\",\n      textContent: _toDisplayString($options.getMessageTime(msg.createdAt))\n    }, null, 8 /* PROPS */, _hoisted_31)]), _createElementVNode(\"div\", _hoisted_32, [_createElementVNode(\"img\", {\n      src: $options.getPicture(msg.sender),\n      class: \"rounded-circle user_img_msg\"\n    }, null, 8 /* PROPS */, _hoisted_33)])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_34, [_createElementVNode(\"div\", _hoisted_35, [_createElementVNode(\"img\", {\n      src: $options.getPicture(msg.sender),\n      class: \"rounded-circle user_img_msg\"\n    }, null, 8 /* PROPS */, _hoisted_36)]), _createElementVNode(\"div\", _hoisted_37, [_createElementVNode(\"template\", {\n      class: \"more-options\",\n      onClick: $event => $options.showMoreOptions(msg),\n      \"is-my-message\": false\n    }, [_createElementVNode(\"span\", {\n      textContent: _toDisplayString(msg.message)\n    }, null, 8 /* PROPS */, _hoisted_39)], 8 /* PROPS */, _hoisted_38), _createElementVNode(\"p\", {\n      class: \"msg_time message-data-time\",\n      textContent: _toDisplayString($options.getMessageTime(msg.createdAt))\n    }, null, 8 /* PROPS */, _hoisted_40)])]))]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", _hoisted_41, [_createElementVNode(\"div\", _hoisted_42, [_withDirectives(_createElementVNode(\"textarea\", {\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.message = $event),\n    class: \"form-control type_msg\",\n    placeholder: \"Type your message...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.message]]), _createElementVNode(\"div\", _hoisted_43, [_createElementVNode(\"span\", _hoisted_44, [_createElementVNode(\"i\", {\n    class: \"fa fa-location-arrow\",\n    onClick: _cache[7] || (_cache[7] = (...args) => $options.sendMessage && $options.sendMessage(...args))\n  })])])])])])])])])]), _createElementVNode(\"div\", _hoisted_45, [_createElementVNode(\"ul\", _hoisted_46, [_createElementVNode(\"li\", null, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[8] || (_cache[8] = (...args) => $options.deleteContact && $options.deleteContact(...args))\n  }, [_hoisted_47, _createTextVNode(\" Delete\")])])])]), _createElementVNode(\"div\", _hoisted_48, [_createElementVNode(\"ul\", _hoisted_49, [_createElementVNode(\"li\", _hoisted_50, [_createElementVNode(\"a\", {\n    href: \"javascript:void(0)\",\n    onClick: _cache[9] || (_cache[9] = (...args) => $options.copyMessage && $options.copyMessage(...args))\n  }, [_hoisted_51, _createTextVNode(\" Copy\")])])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","id","style","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_createVNode","_component_router_link","to","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","type","placeholder","$data","searchContact","$event","onKeypress","_cache","args","$options","onSearchKeyPress","onKeyup","onSearchKeyUp","_hoisted_10","_hoisted_11","onClick","doSearchContact","_hoisted_12","_hoisted_13","_createElementBlock","_Fragment","_renderList","contacts","contact","key","_id","_normalizeClass","_hoisted_14","_hoisted_15","_toDisplayString","name","isArchive","onChatSelected","unreadMessages","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_ctx","totalMessages","showContactOptions","_hoisted_26","messages","msg","user","email","sender","_hoisted_27","_hoisted_28","showMoreOptions","message","getMessageTime","createdAt","_hoisted_32","src","getPicture","_hoisted_34","_hoisted_35","_hoisted_37","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","sendMessage","_hoisted_45","_hoisted_46","href","deleteContact","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","copyMessage","_hoisted_51"],"sources":["D:\\2023\\2023_PTUDW\\chat-station-mevn-free\\chat-station-mevn-free\\web\\src\\components\\HomeComponent.vue"],"sourcesContent":["<template>\n    <div class=\"container-fluid\" id=\"home-page\" style=\"padding-top: 50px; padding-bottom: 50px;\">\n        <div class=\"row\" style=\"margin-bottom: 50px;\">\n            <div class=\"offset-md-10 col-md-2\">\n                <router-link class=\"btn btn-primary\" to=\"/contacts/add\">Add Contact</router-link>\n            </div>\n        </div>\n\n        <div class=\"container-fluid h-100\">\n            <div class=\"row justify-content-center h-100\">\n                <div class=\"col-md-4 col-xl-3 chat\"><div class=\"card mb-sm-3 mb-md-0 contacts_card\">\n                    <div class=\"card-header\">\n                        <div class=\"input-group\">\n                            <input type=\"text\" placeholder=\"Search...\" class=\"form-control search\" v-model=\"searchContact\" v-on:keypress=\"onSearchKeyPress\" v-on:keyup=\"onSearchKeyUp\" />\n                            <div class=\"input-group-prepend\">\n                                <span class=\"input-group-text search_btn\"><i class=\"fa fa-search\" v-on:click=\"doSearchContact\"></i></span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"card-body contacts_body\">\n                        <ul class=\"contacts\">\n                            <li v-for=\"contact in contacts\" v-bind:key=\"contact._id\" v-bind:class=\"contact._id == _id ? 'active' : ''\">\n                                <div class=\"d-flex bd-highlight\">\n                                    <div class=\"user_info\">\n                                        <span v-text=\"contact.name\" style=\"cursor: pointer;\" v-bind:data-id=\"contact._id\" v-bind:data-name=\"contact.name\" v-bind:data-is-archive=\"contact.isArchive\" v-on:click=\"onChatSelected\"></span>\n                                        <p v-if=\"(contact.unreadMessages > 0)\" v-text=\"' (' + contact.unreadMessages + ')'\" class=\"text-danger\"></p>\n                                    </div>\n                                </div>\n                            </li>\n                        </ul>\n                    </div>\n                    <div class=\"card-footer\"></div>\n                </div></div>\n                <div class=\"col-md-8 col-xl-6 chat\">\n                    <div class=\"card\">\n                        <div class=\"card-header msg_head\">\n                            <div class=\"d-flex bd-highlight\">\n                                <div class=\"user_info\">\n                                    <span>Chat with <span v-text=\"name\"></span></span>\n                                    <p><span v-text=\"totalMessages\" style=\"font-size: 10px; color: rgba(255,255,255,0.6);\"></span> Messages</p>\n                                </div>\n                            </div>\n\n                            <span id=\"action_menu_btn\" class=\"more-options\" v-on:click=\"showContactOptions\"></span>\n                        </div>\n                        <div class=\"card-body msg_card_body\">\n\n                            <div v-for=\"msg in messages\" v-bind:key=\"msg._id\">\n\n                                <template v-if=\"user != null && user.email == msg.sender.email\">\n                                    <div class=\"d-flex justify-content-end mb-4\">\n                                        <div class=\"msg_cotainer_send\">\n                                            <template class=\"more-options\" v-on:click=\"showMoreOptions(msg)\" v-bind:is-my-message=\"true\">\n                                                <span v-text=\"msg.message\"></span>\n                                            </template>\n\n                                            <p class=\"msg_time message-data-time\" v-text=\"getMessageTime(msg.createdAt)\"></p>\n                                        </div>\n\n                                        <div class=\"img_cont_msg\">\n                                            <img v-bind:src=\"getPicture(msg.sender)\" class=\"rounded-circle user_img_msg\" />\n                                        </div>\n                                    </div>\n                                </template>\n\n                                <template v-else>\n                                    <div class=\"d-flex justify-content-start mb-4\">\n                                        <div class=\"img_cont_msg\">\n                                            <img v-bind:src=\"getPicture(msg.sender)\" class=\"rounded-circle user_img_msg\" />\n                                        </div>\n\n                                        <div class=\"msg_cotainer\">\n                                            <template class=\"more-options\" v-on:click=\"showMoreOptions(msg)\" v-bind:is-my-message=\"false\">\n                                                <span v-text=\"msg.message\"></span>\n                                            </template>\n\n                                            <p class=\"msg_time message-data-time\" v-text=\"getMessageTime(msg.createdAt)\"></p>\n                                        </div>\n                                    </div>\n                                </template>\n                            </div>\n                        </div>\n                        <div class=\"card-footer\">\n                            <div class=\"input-group\">\n                                <textarea v-model=\"message\" class=\"form-control type_msg\" placeholder=\"Type your message...\"></textarea>\n                                <div class=\"input-group-append\">\n                                    <span class=\"input-group-text send_btn\"><i class=\"fa fa-location-arrow\" v-on:click=\"sendMessage\"></i></span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div id=\"contextMenuContactOptions\" class=\"context-menu\" style=\"display: none\"> \n        <ul class=\"menu\">\n            <li><a href=\"javascript:void(0)\" v-on:click=\"deleteContact\"><i class=\"fa fa-trash\" aria-hidden=\"true\"></i> Delete</a></li>\n        </ul>\n    </div>\n\n    <div id=\"contextMenu\" class=\"context-menu\" style=\"display: none\"> \n        <ul class=\"menu\">\n            <li class=\"copy\"><a href=\"javascript:void(0)\" v-on:click=\"copyMessage\"><i class=\"fa fa-copy\" aria-hidden=\"true\"></i> Copy</a></li>\n        </ul>\n    </div>\n</template>\n\n<script>\n    import axios from \"axios\"\n    import swal from \"sweetalert2\"\n    import store from \"../vuex/store\"\n\n    import \"../../public/assets/css/chat.css\"\n    \n    export default {\n\n        data() {\n            return {\n                _id: \"\",\n                name: \"\",\n                message: \"\",\n                page: 0,\n                receiver: null,\n                btnLoadMoreClass: \"fa fa-repeat\",\n                hasMoreMessages: true,\n                selectedMessageId: 0,\n                selectedMessageText: \"\",\n                password: \"\",\n                searchContact: \"\"\n            }\n        },\n\n        computed: {\n            contacts() {\n                return store.getters.getContacts\n            },\n\n            messages() {\n                return store.getters.getMessages\n            }\n        },\n\n        methods: {\n            onSearchKeyPress: function () {\n                if (event.key == \"Enter\") {\n                    this.doSearchContact()\n                }\n            },\n\n            onSearchKeyUp: function () {\n                this.doSearchContact()\n            },\n            \n            showContactOptions: function () {\n                var menu = document.getElementById(\"contextMenuContactOptions\")\n                menu.style.display = 'block'\n                menu.style.left = event.pageX + \"px\"\n                menu.style.top = event.pageY + \"px\"\n            },\n\n            copyMessage: function() {\n                navigator.clipboard.writeText(this.selectedMessageText)\n            },\n\n            showMoreOptions: function (msg) {\n                const isMyMessage = event.target.getAttribute(\"is-my-message\")\n                this.selectedMessageId = msg._id\n                this.selectedMessageText = msg.message\n                \n                var menu = document.getElementById(\"contextMenu\")\n                menu.style.display = 'block'\n                if (isMyMessage == \"true\") {\n                    menu.style.left = (event.pageX - 200) + \"px\"\n                } else {\n                    menu.style.left = event.pageX + \"px\"\n                }\n                menu.style.top = event.pageY + \"px\"\n\n                document.querySelector(\".bookmark i\").className = \"fa fa-bookmark-o\"\n\n                if (msg.bookmarkBy) {\n                    document.querySelector(\".bookmark i\").className = \"fa fa-bookmark\"\n                }\n            },\n\n            attachEventListeners: function() {\n                const self = this\n\n                document.addEventListener('click', function(e) {\n                    const moreOptions = document.querySelectorAll(\".more-options\")\n                    let isClickedMoreOptions = true\n                    for (let a = 0; a < moreOptions.length; a++) {\n                        if (moreOptions[a].contains(e.target)) {\n                            // Clicked in box\n                            isClickedMoreOptions = true\n                            break\n                        } else {\n                            // Clicked outside the box\n                            isClickedMoreOptions = false\n                        }\n                    }\n                    if (!isClickedMoreOptions) {\n                        document.getElementById(\"contextMenu\").style.display = \"none\"\n                        document.getElementById(\"contextMenuContactOptions\").style.display = \"none\"\n                    }\n                })\n            },\n\n            getChatPersonPicture: function (user) {\n                if (typeof user.picture !== \"undefined\" && user.picture != \"\") {\n                    return this.$apiURL + \"/\" + user.picture\n                }\n                return \"../../assets/img/avatar2.png\"\n            },\n\n            getPicture: function (user) {\n                if (typeof user.picture !== \"undefined\") {\n                    return this.$apiURL + \"/\" + user.picture\n                }\n                return \"../../assets/img/avatar7.png\"\n            },\n\n            doSearchContact: async function () {\n                const formData = new FormData()\n                formData.append(\"searchContact\", this.searchContact)\n                \n                const response = await axios.post(\n                    this.$apiURL + \"/contact/search\",\n                    formData,\n                    {\n                        headers: this.$headers\n                    }\n                )\n\n                if (response.data.status == \"success\") {\n                    store.commit(\"setContacts\", response.data.data)\n                } else {\n                    swal.fire(\"Error\", response.data.message, \"error\")\n                }\n            },\n\n            doSearch: async function () {\n                const form = event.target\n                const formData = new FormData(form)\n                formData.append(\"email\", this.email)\n                formData.append(\"password\", this.password)\n                \n                const response = await axios.post(\n                    this.$apiURL + \"/chat/search\",\n                    formData,\n                    {\n                        headers: this.$headers\n                    }\n                )\n\n                if (response.data.status == \"success\") {\n                    store.commit(\"setMessages\", [])\n                    for (let a = 0; a < response.data.data.length; a++) {\n                        store.commit(\"prependMessage\", response.data.data[a])\n                    }\n                    this.attachEventListeners()\n                } else {\n                    swal.fire(\"Error\", response.data.message, \"error\")\n                }\n            },\n\n            getMessageTime: function (time) {\n                const dateObj = new Date(time)\n                let timeStr = dateObj.getDate() + \" \" + this.$months[dateObj.getMonth()] + \", \" + dateObj.getFullYear() + \" \" + dateObj.getHours() + \":\" + dateObj.getMinutes() + \":\" + dateObj.getSeconds()\n                return timeStr\n            },\n\n            loadMore: function () {\n                this.btnLoadMoreClass = \"fa fa-spinner fa-spin\"\n                this.page++\n                this.getData()\n            },\n            \n            sendMessage: async function () {\n\n                const formData = new FormData()\n                formData.append(\"_id\", this._id)\n                formData.append(\"message\", this.message)\n                formData.append(\"password\", this.password)\n\n                const response = await axios.post(\n                    this.$apiURL + \"/chat/send\",\n                    formData,\n                    {\n                        headers: this.$headers\n                    }\n                )\n\n                if (response.data.status == \"success\") {\n                    this.message = \"\"\n\n                    store.commit(\"appendMessage\", response.data.messageObject)\n                    this.attachEventListeners()\n                } else {\n                    swal.fire(\"Error\", response.data.message, \"error\")\n                }\n            },\n\n            deleteContact: async function () {\n                const self = this\n\n                swal.fire({\n                    title: 'Are you sure?',\n                    text: \"This will be removed from your contact\",\n                    icon: 'warning',\n                    showCancelButton: true,\n                    confirmButtonColor: '#3085d6',\n                    cancelButtonColor: '#d33',\n                    confirmButtonText: 'Yes, delete it!'\n                }).then(async function(result) {\n                    if (result.isConfirmed) {\n\n                        self.isDeleting = true;\n                        const formData = new FormData()\n                        formData.append(\"_id\", self._id)\n\n                        const response = await axios.post(\n                            self.$apiURL + \"/contact/delete\",\n                            formData,\n                            {\n                                headers: self.$headers\n                            }\n                        )\n                        self.isDeleting = false\n\n                        if (response.data.status == \"success\") {\n                            swal.fire(\n                                'Deleted!',\n                                response.data.message,\n                                'success'\n                            );\n\n                            const contactsArr = self.contacts;\n                            for (let a = 0; a < contactsArr.length; a++) {\n                                if (contactsArr[a]._id == self._id) {\n                                    contactsArr.splice(a, 1);\n                                    break;\n                                }\n                            }\n                            self.contacts = contactsArr\n\n                            store.commit(\"setMessages\", [])\n                            self.totalMessages = 0\n                            self.name = \"\"\n                            self._id = \"\"\n                        } else {\n                            swal.fire(\"Error\", response.data.message, \"error\");\n                        }\n                    }\n                })\n            },\n\n            onChatSelected: function () {\n                const self = this\n                store.commit(\"setMessages\", [])\n                this._id = event.target.getAttribute(\"data-id\")\n                this.name = event.target.getAttribute(\"data-name\")\n\n                this.getChat()\n            },\n\n            getChat: async function () {\n                const self = this\n                \n                const formData = new FormData()\n                formData.append(\"_id\", this._id)\n                formData.append(\"page\", this.page)\n                formData.append(\"password\", this.password)\n\n                const response = await axios.post(\n                    this.$apiURL + \"/chat/fetch\",\n                    formData,\n                    {\n                        headers: this.$headers\n                    }\n                )\n\n                this.btnLoadMoreClass = \"fa fa-repeat\"\n\n                if (response.data.status == \"success\") {\n\n                    this.totalMessages = response.data.totalMessages\n\n                    for (let a = 0; a < response.data.messages.length; a++) {\n                        store.commit(\"prependMessage\", response.data.messages[a])\n                    }\n                    this.hasMoreMessages = (response.data.messages.length == 0) ? false : true\n                    this.receiver = response.data.receiver\n                    this.user = response.data.user\n                    this.attachEventListeners()\n                } else {\n                    swal.fire(\"Error\", response.data.message, \"error\")\n                }\n            },\n\n            getData: async function () {\n                const self = this\n\n                const response = await axios.post(\n                    this.$apiURL + \"/contact/fetch\",\n                    null,\n                    {\n                        headers: this.$headers\n                    }\n                )\n\n                if (response.data.status == \"success\") {\n                    store.commit(\"setContacts\", response.data.contacts)\n                } else {\n                    swal.fire(\"Error\", response.data.message, \"error\");\n                }\n            }\n        },\n\n        mounted: function () {\n            this.getData()\n        },\n\n        watch: {\n            $route: function (to, from) {\n                store.commit(\"setMessages\", [])\n                store.commit(\"setContacts\", [])\n                this._id = \"\"\n                this.name = \"\"\n                this.isArchive = false\n            }\n        }\n    }\n</script>\n\n<style>\n    #home-page {\n            height: 100%;\n            margin: 0;\n            background: #7F7FD5;\n           background: -webkit-linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5);\n            background: linear-gradient(to right, #91EAE4, #86A8E7, #7F7FD5);\n        }\n\n        .chat{\n            margin-top: auto;\n            margin-bottom: auto;\n        }\n        .card{\n            height: 500px;\n            border-radius: 15px !important;\n            background-color: rgba(0,0,0,0.4) !important;\n        }\n        .contacts_body{\n            padding:  0.75rem 0 !important;\n            overflow-y: auto;\n            white-space: nowrap;\n        }\n        .msg_card_body{\n            overflow-y: auto;\n        }\n        .card-header{\n            border-radius: 15px 15px 0 0 !important;\n            border-bottom: 0 !important;\n        }\n     .card-footer{\n        border-radius: 0 0 15px 15px !important;\n            border-top: 0 !important;\n            background-color: transparent !important;\n    }\n        .container{\n            align-content: center;\n        }\n        .search{\n            border-radius: 15px 0 0 15px !important;\n            background-color: rgba(0,0,0,0.3) !important;\n            border:0 !important;\n            color:white !important;\n        }\n        .search:focus{\n             box-shadow:none !important;\n           outline:0px !important;\n        }\n        .type_msg{\n            background-color: rgba(0,0,0,0.3) !important;\n            border:0 !important;\n            color:white !important;\n            height: 60px !important;\n            overflow-y: auto;\n        }\n            .type_msg:focus{\n             box-shadow:none !important;\n           outline:0px !important;\n        }\n        .attach_btn{\n    border-radius: 15px 0 0 15px !important;\n    background-color: rgba(0,0,0,0.3) !important;\n            border:0 !important;\n            color: white !important;\n            cursor: pointer;\n        }\n        .send_btn{\n    border-radius: 0 15px 15px 0 !important;\n    background-color: rgba(0,0,0,0.3) !important;\n            border:0 !important;\n            color: white !important;\n            cursor: pointer;\n        }\n        .search_btn{\n            border-radius: 0 15px 15px 0 !important;\n            background-color: rgba(0,0,0,0.3) !important;\n            border:0 !important;\n            color: white !important;\n            cursor: pointer;\n        }\n        .contacts{\n            list-style: none;\n            padding: 0;\n        }\n        .contacts li{\n            width: 100% !important;\n            padding: 5px 10px;\n            margin-bottom: 15px !important;\n        }\n    .active{\n            background-color: rgba(0,0,0,0.3);\n    }\n        .user_img{\n            height: 70px;\n            width: 70px;\n            border:1.5px solid #f5f6fa;\n        \n        }\n        .user_img_msg{\n            height: 40px;\n            width: 40px;\n            border:1.5px solid #f5f6fa;\n        \n        }\n    .img_cont{\n            position: relative;\n            height: 70px;\n            width: 70px;\n    }\n    .img_cont_msg{\n            height: 40px;\n            width: 40px;\n    }\n    .online_icon{\n        position: absolute;\n        height: 15px;\n        width:15px;\n        background-color: #4cd137;\n        border-radius: 50%;\n        bottom: 0.2em;\n        right: 0.4em;\n        border:1.5px solid white;\n    }\n    .offline{\n        background-color: #c23616 !important;\n    }\n    .user_info{\n        margin-top: auto;\n        margin-bottom: auto;\n        margin-left: 15px;\n    }\n    .user_info span{\n        font-size: 20px;\n        color: white;\n    }\n    .user_info p{\n    font-size: 10px;\n    color: rgba(255,255,255,0.6);\n    }\n    .video_cam{\n        margin-left: 50px;\n        margin-top: 5px;\n    }\n    .video_cam span{\n        color: white;\n        font-size: 20px;\n        cursor: pointer;\n        margin-right: 20px;\n    }\n    .msg_cotainer{\n        margin-top: auto;\n        margin-bottom: auto;\n        margin-left: 10px;\n        border-radius: 25px;\n        background-color: #82ccdd;\n        padding: 10px;\n        position: relative;\n    }\n    .msg_cotainer_send{\n        margin-top: auto;\n        margin-bottom: auto;\n        margin-right: 10px;\n        border-radius: 25px;\n        background-color: #78e08f;\n        padding: 10px;\n        position: relative;\n    }\n    .msg_time{\n        /*position: absolute;\n        left: 0;\n        bottom: -15px;\n        color: rgba(255,255,255,0.5);*/\n        font-size: 10px;\n        margin-bottom: 0px;\n        margin-top: 10px;\n    }\n    .msg_time_send{\n        position: absolute;\n        right:0;\n        bottom: -15px;\n        color: rgba(255,255,255,0.5);\n        font-size: 10px;\n    }\n    .msg_head{\n        position: relative;\n    }\n    #action_menu_btn{\n        position: absolute;\n        right: 10px;\n        top: 10px;\n        color: white;\n        cursor: pointer;\n        font-size: 20px;\n    }\n    .action_menu{\n        z-index: 1;\n        position: absolute;\n        padding: 15px 0;\n        background-color: rgba(0,0,0,0.5);\n        color: white;\n        border-radius: 15px;\n        top: 30px;\n        right: 15px;\n        display: none;\n    }\n    .action_menu ul{\n        list-style: none;\n        padding: 0;\n    margin: 0;\n    }\n    .action_menu ul li{\n        width: 100%;\n        padding: 10px 15px;\n        margin-bottom: 5px;\n    }\n    .action_menu ul li i{\n        padding-right: 10px;\n    \n    }\n    .action_menu ul li:hover{\n        cursor: pointer;\n        background-color: rgba(0,0,0,0.2);\n    }\n    @media(max-width: 576px){\n    .contacts_card{\n        margin-bottom: 15px !important;\n    }\n    }\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}